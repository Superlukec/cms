<div class="p-4">
    <ng-container *ngIf="!page">

        <div class="d-flex align-items-center">
            <h2>View web assets</h2>
            <ng-container *ngxPermissionsOnly="['SUPER_ADMIN', 'ADMIN']">
                <div class="ml-auto">
                    <button class="btn text-muted" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu shadow border-0" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="javascript:void(0)" (click)="admin_totalFiles()">
                            <i class="text-primary fas fa-info-circle"></i>
                            &nbsp;
                            Total files in MB
                        </a>
                        <a class="dropdown-item" href="javascript:void(0)" (click)="admin_deleteBrokenLinks()">
                            <i class="text-danger far fa-trash-alt"></i>
                            &nbsp;
                            Delete broken links
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="javascript:void(0)" (click)="admin_showUnusedFiles()">
                            <i class="text-success fas fa-eye"></i>
                            &nbsp;
                            Show unused files
                        </a>
                        <!--
                        <a class="dropdown-item" href="javascript:void(0)" (click)="admin_deleteUnusedFiles()">
                            <i class="text-danger far fa-trash-alt"></i>
                            &nbsp;
                            Delete unused files
                        </a>-->
                    </div>
                </div>
            </ng-container>
        </div>

        <file-explorer public="true"></file-explorer>
    </ng-container>

    <ng-container *ngIf="page">
        <ng-container *ngIf="addNew">
            <div class="container h-100">

                <div class="row">

                    <div class="col-12 col-md-6">

                        <h2>Upload assets</h2>

                        <div>Uploaded assets will be visible to public.</div>

                        <app-upload-file assets="true" dragDrop="true" (data)="onFileUpload($event)"></app-upload-file>


                        <div *ngIf="files.length > 0">
                            <div class="row">
                                <div class="col-12 col-md-6 my-4" *ngFor="let f of files">
                                    <div style="position: absolute; right: 0; margin-top: -15px; width: 35px; z-index: 9;"
                                        class="p-2 btn-circle text-center pointer btn-danger" title="Delete"
                                        (click)="deleteFile(f._id)">
                                        <i class="fas fa-trash-alt"></i>
                                    </div>
                                    <div class="bg-white p-2" style="width: 100%; height: 150px;">
                                        <div class="h-100 d-flex justify-content-center align-items-center">
                                            <div class="text-center">
                                                <i class="far fa-file" style="font-size: 2rem;"></i>
                                                <div style="word-break: break-all;">{{ f.original_name }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>

                </div>

            </div>

        </ng-container>
        <ng-container *ngIf="!addNew">
            Specifiƒçen
        </ng-container>
    </ng-container>

</div>